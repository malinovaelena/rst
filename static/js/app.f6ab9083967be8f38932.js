webpackJsonp([1],{"B/lJ":function(t,e){},"CIo/":function(t,e){},Cdet:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i=n("Dd8w"),s=n.n(i),r=n("mvHQ"),o=n.n(r),l=n("BO1k"),c=n.n(l);var u={name:"contact-add-modal",props:{contacts:{type:Array,default:function(){return[]}}},data:function(){return{contact:{Name:"",Phone:"",Director:"",Subordinates:[]},items:[]}},created:function(){var t,e;this.items=(t=this.contacts,e=[],function t(n){n.forEach(function(n){n.Subordinates.length>0?(e.push(n),t(n.Subordinates)):e.push(n)})}(t),e)},computed:{isValidate:function(){var t=this.contact,e=t.Name,n=t.Phone;return e&&n}},methods:{save:function(){this.isValidate?this.$emit("save",this.contact):alert("Заполните поля - имя и телефон")},addPhone:function(t){this.contact.Phone=t},addName:function(t){this.contact.Name=t},addDirector:function(t){this.contact.Director=t}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-modal",{staticClass:"contact-add-modal",on:{close:function(e){return t.$emit("close")}}},[n("template",{slot:"title"},[t._v("\n        Добавление пользователя\n    ")]),t._v(" "),n("div",{staticClass:"contact-add-modal__content"},[n("ui-field",{attrs:{title:"Имя"}},[n("ui-input",{on:{update:t.addName}})],1),t._v(" "),n("ui-field",{attrs:{title:"Телефон"}},[n("ui-input",{attrs:{numeric:""},on:{update:t.addPhone}})],1),t._v(" "),t.contacts.length?n("ui-field",{attrs:{title:"Начальник"}},[n("ui-select",{attrs:{items:t.items},on:{update:t.addDirector}})],1):t._e()],1),t._v(" "),n("template",{slot:"footer"},[n("ui-button",{on:{click:t.save}},[t._v("Сохранить")])],1)],2)},staticRenderFns:[]};var m=n("VU/8")(u,d,!1,function(t){n("Zdhl")},null,null).exports,p={name:"table-row",props:{item:{type:Object,required:!0}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table-row"},[n("div",[n("div",{staticClass:"table-cell__name"},[t.item.Subordinates.length>0?n("div",{staticClass:"table-cell__has-director"},[t._v("+")]):t._e(),t._v("\n            "+t._s(t.item.Name)+"\n        ")]),t._v(" "),n("div",{staticClass:"table-cell__phone"},[t._v("\n            "+t._s(t.item.Phone)+"\n        ")])]),t._v(" "),t.item.Subordinates?t._l(t.item.Subordinates,function(t){return n("table-row",{key:t.ID,attrs:{item:t}})}):t._e()],2)},staticRenderFns:[]};var f=function(t){return parseInt(t.replaceAll(" ",""),0)},h={name:"main-table",components:{TableRow:n("VU/8")(p,v,!1,function(t){n("sR8X")},null,null).exports},props:{items:{type:Array,default:function(){return[]}},tableHeading:{type:[Array,Object],default:function(){return[]}}},data:function(){return{parsedData:[],sortAscending:!1,sortItem:null}},watch:{items:{immediate:!0,handler:function(t){this.parsedData=this.items}}},methods:{addSorting:function(t){this.sortItem=t,this.sortAscending=!this.sortAscending,this.parsedData=this.sort()},sort:function(){var t=this.sortItem,e=this.parsedData,n=this.sortAscending,a=e;return"Name"===t?a.sort(function(t,e){return t.Name.localeCompare(e.Name)}):a.sort(function(t,e){return f(t.Phone)-f(e.Phone)}),n?a:a.reverse()}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table"},[n("div",{staticClass:"table__heading"},[n("div",{staticClass:"table-row"},[n("div",[n("div",{staticClass:"table-cell__name",on:{click:function(e){return t.addSorting("Name")}}},[t._v("\n                  Имя\n              ")]),t._v(" "),n("div",{staticClass:"table-cell__phone",on:{click:function(e){return t.addSorting("Phone")}}},[t._v("\n                  Телефон\n              ")])])])]),t._v(" "),n("div",{staticClass:"table__body"},t._l(t.parsedData,function(t){return n("table-row",{key:t.ID,attrs:{item:t}})}),1)])},staticRenderFns:[]};var b=[{ID:1,Name:"Марина",Phone:"+ 7 923 232 44 41",Director:null,Subordinates:[]},{ID:2,Name:"Петр",Phone:"+ 7 923 232 44 49",Director:null,Subordinates:[]},{ID:3,Name:"Алексей",Phone:"+ 7 923 232 44 44",Director:null,Subordinates:[]},{ID:4,Name:"Иван",Phone:"+ 7 923 232 44 46",Director:null,Subordinates:[]},{ID:5,Name:"Борис",Phone:"+ 7 923 232 44 40",Director:null,Subordinates:[]}],g={Name:"Имя",Phone:"Телефон"},D={name:"main-page",components:{MainTable:n("VU/8")(h,_,!1,function(t){n("zw7/")},null,null).exports,ContactAddModal:m},created:function(){var t=localStorage.getItem("table-data"),e=JSON.parse(t);if(Array.isArray(e))this.tableData=e;else{localStorage.removeItem("table-data"),this.tableData=b;var n=o()(b);localStorage.setItem("table-data",n)}},updated:function(){this.saveInStorage()},data:function(){return{IsModalOpen:!1,tableHeading:g,tableData:[],parsed:[]}},watch:{tableData:{immediate:!0,handler:function(){this.parsed=this.tableData}}},methods:{open:function(){this.IsModalOpen=!0},saveInStorage:function(){var t=o()(this.tableData);localStorage.setItem("table-data",t)},save:function(t){var e=s()({},t,{ID:this.tableData.length+1});!function t(e,n){var a=e.findIndex(function(t){return t.ID==n.Director});if(a>-1)return e[a].Subordinates&&e[a].Subordinates.push(n),e[a].Subordinates=[n];var i=!0,s=!1,r=void 0;try{for(var o,l=c()(e);!(i=(o=l.next()).done);i=!0){var u=o.value;if(u.Subordinates)return t(u.Subordinates,n)}}catch(t){s=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw r}}}(this.tableData,e),this.IsModalOpen=!1},close:function(){this.IsModalOpen=!1}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-page"},[n("ui-button",{staticClass:"main-page__open-modal",on:{click:t.open}},[t._v("Добавить")]),t._v(" "),n("main-table",{attrs:{items:t.parsed,tableHeading:t.tableHeading}}),t._v(" "),t.IsModalOpen?n("contact-add-modal",{attrs:{contacts:t.tableData},on:{save:t.save,close:t.close}}):t._e()],1)},staticRenderFns:[]};var I={name:"App",components:{MainPage:n("VU/8")(D,C,!1,function(t){n("Cdet")},null,null).exports}},S={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("main-page")],1)},staticRenderFns:[]};var y=n("VU/8")(I,S,!1,function(t){n("pydT")},null,null).exports,N=n("4RmS"),k=n.n(N),w={render:function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"ui-button",on:{click:this.click}},[this._t("default")],2)},staticRenderFns:[]};var P=n("VU/8")({name:"ui-button",methods:{click:function(){this.$emit("click")}}},w,!1,function(t){n("CIo/")},null,null).exports,x={name:"ui-field",props:{title:{type:String,required:!0}}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ui-field"},[e("div",{staticClass:"ui-field__title"},[this._v(this._s(this.title))]),this._v(" "),e("div",{staticClass:"ui-field__input"},[this._t("default")],2)])},staticRenderFns:[]};var A=n("VU/8")(x,R,!1,function(t){n("XH3I")},null,null).exports,$={name:"ui-input",components:{MaskedInput:n("4q2C").a},props:{placeholder:{type:String,default:null},numeric:{type:Boolean,default:!1}},data:function(){return{value:""}},watch:{value:{immediate:!0,handler:function(t,e){if(!this.numeric){var n=new RegExp("[^a-я|\\s]");!t.match(n)||(this.value=e)}this.$emit("update",t)}}}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-input"},[t.numeric?n("masked-input",{attrs:{mask:"\\+\\7 911 111 11 11",placeholder:t.placeholder},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})],1)},staticRenderFns:[]};var E=n("VU/8")($,F,!1,function(t){n("pFRm")},null,null).exports,V={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-modal__outer"},[n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.close,expression:"close"}],staticClass:"ui-modal"},[n("div",{staticClass:"ui-modal__heading"},[n("div",{staticClass:"ui-modal__title"},[t._t("title")],2),t._v(" "),n("div",{staticClass:"ui-modal__close",on:{click:t.close}},[t._v("+")])]),t._v(" "),n("div",{staticClass:"ui-modal__body"},[t._t("default")],2),t._v(" "),n("div",{staticClass:"ui-modal__footer"},[t._t("footer")],2)])])},staticRenderFns:[]};var M=n("VU/8")({name:"ui-modal",data:function(){return{}},methods:{close:function(){this.$emit("close")}}},V,!1,function(t){n("B/lJ")},null,null).exports,O={name:"ui-select",props:{items:{type:Array,required:!0}},data:function(){return{selected:null}},watch:{selected:function(t){this.$emit("update",t)}}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ui-select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selected=e.target.multiple?n:n[0]}}},t._l(t.items,function(e){return n("option",{key:e.ID,domProps:{value:e.ID}},[n("div",{staticClass:"ui-select__option"},[t._v("\n            "+t._s(e.Name)+"\n          ")])])}),0)])},staticRenderFns:[]};var H=n("VU/8")(O,U,!1,function(t){n("ZFe1")},null,null).exports;a.a.component("ui-button",P),a.a.component("ui-field",A),a.a.component("ui-input",E),a.a.component("ui-modal",M),a.a.component("ui-select",H);a.a.use(k.a),a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:y},template:"<App/>"})},XH3I:function(t,e){},ZFe1:function(t,e){},Zdhl:function(t,e){},pFRm:function(t,e){},pydT:function(t,e){},sR8X:function(t,e){},"zw7/":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f6ab9083967be8f38932.js.map